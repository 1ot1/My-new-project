<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OMR Price Tracker – Best iPhone Deals in Oman</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root{
            --primary:#4f46e5;
            --success:#10b981;
            --danger:#ef4444;
            --gold:#f59e0b;
            --gold-dark:#d97706;
            --light:#f9fafb;
            --border:#e5e7eb;
            --text:#1f2937;
            --muted:#6b7280;
        }
        *{margin:0;padding:0;box-sizing:border-box;}
        body{
            font-family:'Inter',sans-serif;
            background:#f8fafc;
            color:var(--text);
            line-height:1.6;
        }
        .container{max-width:1300px;margin:auto;padding:1rem;}
        .header{
            text-align:center;
            padding:2rem 1rem;
            background:linear-gradient(135deg,var(--primary),#6366f1);
            color:white;
            border-radius:1rem;
            margin-bottom:1.5rem;
            box-shadow:0 10px 25px rgba(79,70,229,.15);
        }
        .header h1{font-size:2.5rem;font-weight:700;margin-bottom:.5rem;}
        .header p{font-size:1.1rem;opacity:.95;}

        .contact-bar{
            background:linear-gradient(135deg,var(--gold),var(--gold-dark));
            color:white;
            padding:1rem 1.5rem;
            border-radius:1rem;
            text-align:center;
            font-weight:600;
            margin-bottom:1.5rem;
            box-shadow:0 8px 20px rgba(245,158,11,.2);
        }
        .contact-bar a{color:white;text-decoration:none;}
        .contact-bar a:hover{text-decoration:underline;}

        .location-bar{
            display:flex;justify-content:space-between;align-items:center;
            background:white;
            padding:1rem 1.5rem;
            border-radius:1rem;
            border:1px solid var(--border);
            margin-bottom:1.5rem;
            flex-wrap:wrap;gap:1rem;
        }
        .location-btn{
            background:var(--success);color:white;border:none;
            padding:.65rem 1.25rem;border-radius:.75rem;
            font-weight:600;cursor:pointer;display:flex;align-items:center;gap:.5rem;
        }
        .location-btn:hover{background:#059669;}

        .tabs{
            display:flex;gap:.75rem;overflow-x:auto;padding-bottom:.5rem;
            margin-bottom:1.5rem;white-space:nowrap;
        }
        .tab{
            background:white;border:1px solid var(--border);
            padding:.65rem 1.5rem;border-radius:.75rem;
            cursor:pointer;font-weight:600;transition:.2s;
        }
        .tab.active,.tab:hover{
            background:var(--primary);color:white;border-color:var(--primary);
        }

        .search-section{
            position:relative;max-width:600px;margin:auto auto 1.5rem;
        }
        .search-box{
            width:100%;padding:.9rem 1rem .9rem 3rem;
            border:2px solid var(--border);border-radius:1rem;
            font-size:1rem;background:white;
        }
        .search-box:focus{
            outline:none;border-color:var(--primary);
            box-shadow:0 0 0 4px rgba(79,70,229,.1);
        }
        .search-icon{
            position:absolute;left:1rem;top:50%;transform:translateY(-50%);
            color:var(--muted);
        }

        table{
            width:100%;border-collapse:collapse;
            background:white;border-radius:1rem;overflow:hidden;
            box-shadow:0 6px 18px rgba(0,0,0,.08);
            margin-bottom:1.5rem;
        }
        th{
            background:var(--primary);color:white;padding:1rem;
            text-align:left;font-weight:600;
        }
        td{padding:1rem;vertical-align:middle;}
        tr{border-bottom:1px solid var(--border);}
        tr:last-child{border-bottom:none;}
        tr:hover{background:#f1f5f9;}

        .phone-img{
            width:80px;height:80px;object-fit:contain;border-radius:.5rem;
        }
        .model{font-weight:700;color:var(--text);}
        .price{font-weight:700;}
        .best-price{color:var(--success);}
        .our-store{background:linear-gradient(135deg,rgba(245,158,11,.08),rgba(217,119,6,.08));}
        .our-store .price{color:var(--gold);font-weight:800;}
        .badge{
            background:var(--gold);color:white;padding:.2rem .5rem;
            border-radius:.4rem;font-size:.75rem;font-weight:700;
        }
        .buy-btn{
            background:var(--primary);color:white;border:none;
            padding:.5rem 1rem;border-radius:.6rem;
            font-weight:600;cursor:pointer;font-size:.9rem;
        }
        .buy-btn.whatsapp{
            background:#25d366;color:white;
        }
        .buy-btn.our-store{
            background:linear-gradient(135deg,var(--gold),var(--gold-dark));
            font-weight:700;
        }
        .buy-btn:hover{transform:scale(1.05);}

        .no-results{
            text-align:center;padding:3rem;color:var(--muted);
        }
        .footer{
            text-align:center;padding:2rem;color:var(--muted);
            font-size:.9rem;border-top:1px solid var(--border);
            margin-top:2rem;
        }

        @media (max-width:768px){
            .header h1{font-size:2rem;}
            table{font-size:.9rem;}
            .phone-img{width:60px;height:60px;}
            th,td{padding:.75rem;}
            .location-bar{flex-direction:column;text-align:center;}
        }
    </style>
</head>
<body>
<div class="container">

    <!-- Header -->
    <div class="header">
        <h1>OMR Price Tracker</h1>
        <p>Best iPhone Prices in Oman – Updated 3 Nov 2025</p>
    </div>

    <!-- Contact -->
    <div class="contact-bar">
        Call us: <a href="tel:+96878006000">+968 7800 6000</a>
    </div>

    <!-- Location -->
    <div class="location-bar">
        <button class="location-btn" onclick="getLocation()">Detect Location</button>
        <div id="locationInfo">Location not detected</div>
    </div>

    <!-- Tabs -->
    <div class="tabs">
        <div class="tab active" onclick="filterCategory('all')">All Phones</div>
        <div class="tab" onclick="filterCategory('apple')">iPhone</div>
        <div class="tab" onclick="filterCategory('samsung')">Samsung</div>
    </div>

    <!-- Search -->
    <div class="search-section">
        <span class="search-icon">Search</span>
        <input type="text" class="search-box" id="searchInput"
               placeholder="Search iPhone 17 Pro, S25..." onkeyup="searchProducts()">
    </div>

    <!-- Results Table -->
    <table id="resultsTable">
        <thead>
            <tr>
                <th>Phone</th>
                <th>Store</th>
                <th>Price</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="results"></tbody>
    </table>

    <!-- Footer -->
    <div class="footer">
        OMR Price Tracker © 2025 • Contact: +968 7800 6000
    </div>
</div>

<script>
// === YOUR STORE ===
const YOUR_STORE = {
    name: "YOUR STORE",
    url: "https://w.app/4lcz0e",  // WhatsApp link
    contact: "+968 7800 6000",
    isOurStore: true
};

// === FULL DATABASE ===
const products = [
    {
        model: "iPhone 17 Pro 256GB",
        category: "apple",
        image: "https://www.gsmarena.com/pictures/iphone-17-pro.jpg",
        stores: [
            {...YOUR_STORE, price: 450},
            {name: "Gadgets Oman", price: 489, url: "https://gadgetsoman.com/", contact: "N/A"},
            {name: "OMAN PHONE", price: 520, url: "https://omanphone.shop/", contact: "+968 9060 0110"},
            {name: "EXTRA OMAN", price: 510, url: "https://www.extra.com/ar-om/", contact: "N/A"}
        ]
    },
    {
        model: "iPhone 17 256GB",
        category: "apple",
        image: "https://www.gsmarena.com/pictures/iphone-17.jpg",
        stores: [
            {...YOUR_STORE, price: 330},
            {name: "Gadgets Oman", price: 359, url: "https://gadgetsoman.com/", contact: "N/A"},
            {name: "OMAN PHONE", price: 375, url: "https://omanphone.shop/", contact: "+968 9060 0110"},
            {name: "EXTRA OMAN", price: 369, url: "https://www.extra.com/ar-om/", contact: "N/A"}
        ]
    },
    {
        model: "iPhone 16 128GB",
        category: "apple",
        image: "https://www.gsmarena.com/pictures/iphone-16.jpg",
        stores: [
            {...YOUR_STORE, price: 250},
            {name: "Gadgets Oman", price: 260, url: "https://gadgetsoman.com/", contact: "N/A"},
            {name: "OMAN PHONE", price: 280, url: "https://omanphone.shop/", contact: "+968 9060 0110"},
            {name: "EXTRA OMAN", price: 280, url: "https://www.extra.com/ar-om/", contact: "N/A"}
        ]
    },
    {
        model: "iPhone 16 Pro 128GB",
        category: "apple",
        image: "https://www.gsmarena.com/pictures/iphone-16-pro.jpg",
        stores: [
            {name: "OMAN PHONE", price: 385, url: "https://omanphone.shop/", contact: "+968 9060 0110"},
            {name: "Gadgets Oman", price: 408, url: "https://gadgetsoman.com/", contact: "N/A"}
        ]
    },
    {
        model: "iPhone 17 Pro Max 256GB",
        category: "apple",
        image: "https://www.gsmarena.com/pictures/iphone-17-pro-max.jpg",
        stores: [
            {name: "OMAN PHONE", price: 570, url: "https://omanphone.shop/", contact: "+968 9060 0110"},
            {name: "Gadgets Oman", price: 539, url: "https://gadgetsoman.com/", contact: "N/A"}
        ]
    },
    {
        model: "Samsung Galaxy S25 Ultra 512GB",
        category: "samsung",
        image: "https://www.gsmarena.com/pictures/samsung-galaxy-s25-ultra.jpg",
        stores: [
            {name: "EXTRA OMAN", price: 485, url: "https://www.extra.com/ar-om/", contact: "N/A"},
            {name: "Gadgets Oman", price: 465, url: "https://gadgetsoman.com/", contact: "N/A"}
        ]
    }
];

let currentCategory = 'all';

function getLocation(){
    if(navigator.geolocation){
        navigator.geolocation.getCurrentPosition(
            ()=>{document.getElementById('locationInfo').innerHTML='Location detected';},
            ()=>{document.getElementById('locationInfo').innerHTML='Muscat (default)';}
        );
    }
}

function filterCategory(cat){
    currentCategory=cat;
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.querySelector(`.tab[onclick="filterCategory('${cat}')"]`).classList.add('active');
    searchProducts();
}

function searchProducts(){
    const q = document.getElementById('searchInput').value.toLowerCase();
    const filtered = products.filter(p =>
        p.model.toLowerCase().includes(q) &&
        (currentCategory === 'all' || p.category === currentCategory)
    );
    displayProducts(filtered);
}

function displayProducts(list){
    const tbody = document.getElementById('results');
    if(!list.length){
        tbody.innerHTML = `<tr><td colspan="4" class="no-results"><h3>No results found</h3><p>Try another keyword.</p></td></tr>`;
        return;
    }

    let rows = '';
    list.forEach(p => {
        const bestPrice = Math.min(...p.stores.map(s=>s.price));
        p.stores.forEach(store => {
            const isBest = store.price === bestPrice;
            const isOur = store.isOurStore;
            rows += `
            <tr class="${isOur?'our-store':''}">
                <td>
                    <img src="${p.image}" alt="${p.model}" class="phone-img" onerror="this.src='https://via.placeholder.com/80?text=${encodeURIComponent(p.model)}'">
                    <span class="model">${p.model}</span>
                </td>
                <td>
                    ${store.name}
                    ${isOur ? ' <span class="badge">BEST DEAL</span>' : ''}
                </td>
                <td class="price ${isBest?'best-price':''}">${store.price} OMR</td>
                <td>
                    ${isOur ?
                        `<button class="buy-btn whatsapp our-store" onclick="window.open('${store.url}','_blank')">
                            WhatsApp
                        </button>` :
                        `<button class="buy-btn" onclick="window.open('${store.url}','_blank')">
                            Visit Store
                        </button>`
                    }
                </td>
            </tr>`;
        });
    });
    tbody.innerHTML = rows;
}

window.onload = () => {
    displayProducts(products);
    setTimeout(()=>{if(!navigator.geolocation) document.getElementById('locationInfo').innerHTML='Muscat (default)';},1000);
};
</script>
</body>
</html>